#pragma once

// =======================================================================
//
namespace math
{

// =======================================================================
//
class Mat4;

// =======================================================================
//
class Vec3
{
public:

    // -----------------------------------------------------------------
    //
    constexpr Vec3();

    // -----------------------------------------------------------------
    //
    constexpr Vec3( double x,
                    double y,
                    double z );

    // -----------------------------------------------------------------
    //
    void reset( double x,
                double y,
                double z );

    // -----------------------------------------------------------------
    // 
    double dot( const Vec3& rhs ) const;

    // -----------------------------------------------------------------
    //
    double length() const;

    // -----------------------------------------------------------------
    //
    Vec3 cross( const Vec3& rhs ) const;

    // -----------------------------------------------------------------
    //
    void normalize();

    // -----------------------------------------------------------------
    //
    void print() const;

    // -----------------------------------------------------------------
    //
    static void test();

    // -----------------------------------------------------------------
    //
    double operator[]( size_t i ) const;

    // -----------------------------------------------------------------
    //
    Vec3 operator*( double scalar ) const;

    // -----------------------------------------------------------------
    // The vector * matrix multiplication is performed as if the Vec3 is
    // a 4-vector with the w component fixed to 0.
    Vec3 operator*( const Mat4& rhs ) const;

    // -----------------------------------------------------------------
    //
    Vec3 operator-( const Vec3& rhs ) const;

    // -----------------------------------------------------------------
    //
    Vec3 operator+( const Vec3& rhs ) const;

    // -----------------------------------------------------------------
    //
    ~Vec3()                        = default;
    Vec3( const Vec3& )            = default;
    Vec3( Vec3&& )                 = default;
    Vec3& operator=( const Vec3& ) = default;
    Vec3& operator=( Vec3&& )      = default;

    // -----------------------------------------------------------------
    //
    double x_;
    double y_;
    double z_;
};

}
